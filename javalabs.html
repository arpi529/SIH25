<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Projectile Motion — Dark Theme (PhET-like)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --bg:#0b1221;
      --card:#111827;
      --muted:#94a3b8;
      --accent:#10b981;
      --panel:#1f2937;
      --glass: rgba(255,255,255,0.03);
    }
    html,body{height:100%;}
    body{
      background: linear-gradient(180deg,var(--bg) 0%, #07101a 100%);
      color: #e6eef8;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      padding:1rem;
    }
    .container{max-width:1200px;margin:0 auto}
    .top-bar{background:linear-gradient(90deg,var(--panel),#0f1724);border-bottom:2px solid var(--accent)}
    .card{background:var(--card);box-shadow:0 6px 18px rgba(2,6,23,0.6);border-radius:12px}
    .muted{color:var(--muted)}
    .accent{color:var(--accent)}
    .btn{background:var(--accent);color:#042018;padding:.5rem .9rem;border-radius:10px;font-weight:700}
    input[type=range]{accent-color:var(--accent)}
    .control-label{font-size:.9rem;color:#cfeee5}
    canvas{background:linear-gradient(180deg,#071422 0%, #02202a 100%);border-radius:8px}
    .small{font-size:.85rem}
  </style>
</head>
<body>
  <div class="container">
    <header class="top-bar p-4 mb-6 rounded-xl card flex items-center justify-between">
      <div class="flex items-center gap-4">
        <img src="https://i.pravatar.cc/60" class="w-12 h-12 rounded-full border-2" alt="avatar">
        <div>
          <h1 class="text-lg font-bold">Projectile Motion — Interactive Simulation</h1>
          <p class="muted small">PhET-style simulation (simplified) — theme matched to your file</p>
        </div>
      </div>
      <div class="text-right muted small">
        <div>Made for you — controls on the right • Canvas on the left</div>
      </div>
    </header>

    <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <section class="lg:col-span-2 card p-4">
        <div class="flex items-center justify-between mb-3">
          <div>
            <h2 class="font-semibold">Simulation View</h2>
            <p class="muted small">Press <span class="accent font-bold">Launch</span> to start. Use <span class="accent font-bold">Play/Pause</span> to control.</p>
          </div>
          <div class="flex gap-2 items-center">
            <button id="playBtn" class="btn small">Play</button>
            <button id="pauseBtn" class="btn small" style="background:#ef4444">Pause</button>
            <button id="resetBtn" class="btn small" style="background:#374151">Reset</button>
          </div>
        </div>

        <div class="relative">
          <canvas id="simCanvas" class="w-full h-[520px] rounded"></canvas>
          <div id="hud" class="absolute left-4 top-4 p-3 card" style="background:var(--glass);backdrop-filter: blur(6px);">
            <div class="small muted">Time: <span id="timeDisplay">0.00</span> s</div>
            <div class="small muted">x: <span id="xDisplay">0.00</span> m</div>
            <div class="small muted">y: <span id="yDisplay">0.00</span> m</div>
            <div class="small muted">v_x: <span id="vxDisplay">0.00</span> m/s</div>
            <div class="small muted">v_y: <span id="vyDisplay">0.00</span> m/s</div>
          </div>
        </div>

        <div class="mt-3 grid grid-cols-2 gap-3 small muted">
          <div>Range: <b id="rangeDisplay">0.00</b> m</div>
          <div>Max Height: <b id="hmaxDisplay">0.00</b> m</div>
          <div>Flight Time: <b id="tflightDisplay">0.00</b> s</div>
          <div>Energy (KE): <b id="keDisplay">0.00</b> J</div>
        </div>

      </section>

      <aside class="card p-4">
        <h3 class="font-semibold mb-2">Controls</h3>

        <div class="mb-4">
          <label class="control-label">Initial Speed (m/s) — <span id="speedVal">30</span></label>
          <input id="speed" type="range" min="0" max="200" value="30" class="w-full">
        </div>

        <div class="mb-4">
          <label class="control-label">Angle (°) — <span id="angleVal">45</span></label>
          <input id="angle" type="range" min="0" max="90" value="45" class="w-full">
        </div>

        <div class="mb-4">
          <label class="control-label">Mass (kg) — <span id="massVal">1</span></label>
          <input id="mass" type="range" min="0.1" max="10" step="0.1" value="1" class="w-full">
        </div>

        <div class="mb-4">
          <label class="control-label">Gravity (m/s²) — <span id="gVal">9.81</span></label>
          <input id="gravity" type="range" min="0.1" max="20" step="0.01" value="9.81" class="w-full">
        </div>

        <div class="mb-4">
          <label class="control-label">Air Drag (b) — <span id="dragVal">0.00</span></label>
          <input id="drag" type="range" min="0" max="0.1" step="0.001" value="0" class="w-full">
        </div>

        <div class="mb-4">
          <label class="control-label">Options</label>
          <div class="flex items-center gap-2 mt-2">
            <label class="small muted">Trail</label>
            <input id="showTrail" type="checkbox" checked>
            <label class="small muted">Grid</label>
            <input id="showGrid" type="checkbox" checked>
          </div>
        </div>

        <div class="mb-2">
          <button id="launchBtn" class="btn w-full">Launch</button>
        </div>
      </aside>
    </main>

    <footer class="mt-6 muted small text-center">Built to match your dark theme — interactive, responsive, and self-contained.</footer>
  </div>

  <script>
    const canvas = document.getElementById('simCanvas');
    const ctx = canvas.getContext('2d');
    let W = canvas.clientWidth, H = canvas.clientHeight;

    const margin = 40;
    const world = { width: 120, height: 60 };

    function worldToScreen(x, y){
      const sx = margin + (x / world.width) * (W - margin*2);
      const sy = H - margin - (y / world.height) * (H - margin*2);
      return {sx, sy};
    }

    const controls = {
      speed: document.getElementById('speed'),
      angle: document.getElementById('angle'),
      mass: document.getElementById('mass'),
      gravity: document.getElementById('gravity'),
      drag: document.getElementById('drag'),
      showTrail: document.getElementById('showTrail'),
      showGrid: document.getElementById('showGrid')
    };

    const outputs = {
      speedVal: document.getElementById('speedVal'),
      angleVal: document.getElementById('angleVal'),
      massVal: document.getElementById('massVal'),
      gVal: document.getElementById('gVal'),
      dragVal: document.getElementById('dragVal'),
      time: document.getElementById('timeDisplay'),
      x: document.getElementById('xDisplay'),
      y: document.getElementById('yDisplay'),
      vx: document.getElementById('vxDisplay'),
      vy: document.getElementById('vyDisplay'),
      range: document.getElementById('rangeDisplay'),
      hmax: document.getElementById('hmaxDisplay'),
      tflight: document.getElementById('tflightDisplay'),
      ke: document.getElementById('keDisplay')
    };

    const buttons = {
      play: document.getElementById('playBtn'),
      pause: document.getElementById('pauseBtn'),
      reset: document.getElementById('resetBtn'),
      launch: document.getElementById('launchBtn')
    };

    let sim = {
      playing:false,
      t:0,
      dt:1/60,
      pos:{x:0,y:0},
      vel:{x:0,y:0},
      mass:1,
      g:9.81,
      drag:0,
      trail:[],
      launched:false
    };

    function resize(){
      W = canvas.clientWidth; H = canvas.clientHeight;
      canvas.width = W; canvas.height = H;
    }
    window.addEventListener('resize', resize);
    resize();

    function syncUI(){
      outputs.speedVal.textContent = (+controls.speed.value).toFixed(0);
      outputs.angleVal.textContent = (+controls.angle.value).toFixed(0);
      outputs.massVal.textContent = (+controls.mass.value).toFixed(1);
      outputs.gVal.textContent = (+controls.gravity.value).toFixed(2);
      outputs.dragVal.textContent = (+controls.drag.value).toFixed(3);
    }
    Object.values(controls).forEach(el=>el.addEventListener('input', syncUI));
    syncUI();

    function step(dt){
      if(!sim.launched) return;
      const m = sim.mass;
      const b = sim.drag;
      const ax = - (b/m) * sim.vel.x;
      const ay = -sim.g - (b/m) * sim.vel.y;
      sim.vel.x += ax * dt;
      sim.vel.y += ay * dt;
      sim.pos.x += sim.vel.x * dt;
      sim.pos.y += sim.vel.y * dt;
      sim.t += dt;
      sim.trail.push({x:sim.pos.x,y:sim.pos.y});

      outputs.time.textContent = sim.t.toFixed(2);
      outputs.x.textContent = Math.max(0, sim.pos.x).toFixed(2);
      outputs.y.textContent = Math.max(0, sim.pos.y).toFixed(2);
      outputs.vx.textContent = sim.vel.x.toFixed(2);
      outputs.vy.textContent = sim.vel.y.toFixed(2);
      outputs.ke.textContent = (0.5*sim.mass*(sim.vel.x**2 + sim.vel.y**2)).toFixed(2);

      if(sim.pos.y <= 0 && sim.t>0.02){
        sim.pos.y = 0;
        sim.launched = false;
        sim.playing = false;
        outputs.range.textContent = sim.pos.x.toFixed(2);
        outputs.tflight.textContent = sim.t.toFixed(2);
        outputs.hmax.textContent = Math.max(...sim.trail.map(p=>p.y),0).toFixed(2);
      }
    }

    function draw(){
      ctx.clearRect(0,0,W,H);

      if(controls.showGrid.checked){
        ctx.strokeStyle = 'rgba(255,255,255,0.05)';
        for(let y=0;y<=world.height;y+=5){
          const p1 = worldToScreen(0,y); const p2 = worldToScreen(world.width,y);
          ctx.beginPath(); ctx.moveTo(p1.sx,p1.sy); ctx.lineTo(p2.sx,p2.sy); ctx.stroke();
        }
        for(let x=0;x<=world.width;x+=10){
          const p1 = worldToScreen(x,0); const p2 = worldToScreen(x,world.height);
          ctx.beginPath(); ctx.moveTo(p1.sx,p1.sy); ctx.lineTo(p2.sx,p2.sy); ctx.stroke();
        }
      }

      if(controls.showTrail.checked){
        ctx.beginPath();
        sim.trail.forEach((p,i)=>{
          const s = worldToScreen(p.x,p.y);
          if(i===0) ctx.moveTo(s.sx,s.sy); else ctx.lineTo(s.sx,s.sy);
        });
        ctx.strokeStyle = 'rgba(16,185,129,0.9)'; ctx.lineWidth=2; ctx.stroke();
      }

      if(sim.launched || sim.trail.length>0){
        const s = worldToScreen(sim.pos.x, sim.pos.y);
        ctx.beginPath(); ctx.arc(s.sx,s.sy,8,0,Math.PI*2);
        ctx.fillStyle='#10b981'; ctx.fill();
      }
    }

    let last = performance.now();
    function animate(now){
      const dtReal = (now-last)/1000; last=now;
      if(sim.playing){
        let acc = dtReal;
        while(acc>0){
          const stepDT = Math.min(acc, sim.dt);
          step(stepDT);
          acc -= stepDT;
        }
      }
      draw();
      requestAnimationFrame(animate);
    }
    requestAnimationFrame(animate);

    buttons.play.addEventListener('click', ()=>{ sim.playing=true; });
    buttons.pause.addEventListener('click', ()=>{ sim.playing=false; });
    buttons.reset.addEventListener('click', ()=>{
      sim={playing:false,t:0,dt:1/60,pos:{x:0,y:0},vel:{x:0,y:0},mass:1,g:9.81,drag:0,trail:[],launched:false};
      outputs.time.textContent=outputs.x.textContent=outputs.y.textContent=outputs.vx.textContent=outputs.vy.textContent=outputs.ke.textContent=outputs.range.textContent=outputs.hmax.textContent=outputs.tflight.textContent="0.00";
    });

    buttons.launch.addEventListener('click', ()=>{
      const speed = +controls.speed.value;
      const angle = (+controls.angle.value)*Math.PI/180;
      sim.mass = +controls.mass.value;
      sim.g = +controls.gravity.value;
      sim.drag = +controls.drag.value;
      sim.pos = {x:0,y:0.1};
      sim.vel = {x:speed*Math.cos(angle), y:speed*Math.sin(angle)};
      sim.t=0;
      sim.trail=[{x:0,y:0.1}];
      sim.launched=true;
      sim.playing=true;
      const vacRange=(speed**2*Math.sin(2*angle))/Math.max(sim.g,0.01);
      world.width=Math.max(60,vacRange*1.2+20);
      world.height=Math.max(30,(speed**2*Math.sin(angle)**2/(2*sim.g))*2.5);
    });

  </script>
</body>
</html>
